(this["webpackJsonpmy-project"]=this["webpackJsonpmy-project"]||[]).push([[0],{49:function(e,t,a){e.exports=a(78)},54:function(e,t,a){},55:function(e,t,a){},72:function(e,t,a){e.exports=a.p+"static/media/image.6f3d4789.jpg"},74:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(41),r=(a(54),a(11)),i=a(4),c=a(8),m=(a(55),a(2)),u=a(12),s=a(23),p=a.n(s),g=function(){var e=window.localStorage.getItem("token");return p.a.create({headers:{Authorization:"Bearer ".concat(e)},baseURL:"https://seanmx96-airbnb-optimal-price.herokuapp.com/"})},h=a(14),d=h.a().shape({firstName:h.c().min(2,"First Name must be at least 2 characters long."),lastName:h.c().min(2,"Last Name must be at least 2 characters long."),username:h.c().min(4,"Username must be at least 4 characters long."),email:h.c().email("Invalid Email"),password:h.c().min(6,"Password must be at least 6 characters long").required("Required")}),E=a(17),b=a(18);a(72);function f(){var e=Object(E.a)(["\n    width: 50%;\n    height: 100%;\n    margin: 5%;\n    background: lightblue;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    border-radius: 20px;\n    border: 2px solid white;\n    \n"]);return f=function(){return e},e}function v(){var e=Object(E.a)(["\n    width:100%;\n    display:flex;\n    align-items:center;\n    flex-direction: column;\n    color:white;\n"]);return v=function(){return e},e}function O(){var e=Object(E.a)(["\n    font-size:.8rem;\n    color: red;\n    background: rgba(0, 0, 0, 0.8);\n"]);return O=function(){return e},e}function j(){var e=Object(E.a)(["\n    margin: 2%;\n    background: rgba(0, 0, 0, 0.8);\n    padding: 1%;\n    border-radius:20px;\n    width:40%;\n    font-size: 1.2rem;\n    border: 2px solid white;\n"]);return j=function(){return e},e}function N(){var e=Object(E.a)(["\n    width:15%;\n    color: #FF5A5F;\n    border: 2px solid #FF5A5F;\n    border-radius:20px;\n"]);return N=function(){return e},e}function y(){var e=Object(E.a)(["\n    width:60%;\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    border:4px solid white;\n    padding: 0% 0% 3% 0%;\n    margin-top: 3%;\n    border-radius: 20px;\n    color: white;\n"]);return y=function(){return e},e}var S=b.a.form(y()),w=b.a.button(N()),x=b.a.label(j()),C=b.a.p(O()),k=b.a.div(v()),P=b.a.div(f());function I(e){var t=e.onSubmit,a=e.onChange;return o.a.createElement(S,{onSubmit:t},o.a.createElement("div",null,o.a.createElement("h2",null,"Login:")),o.a.createElement(x,null,"Username:\xa0",o.a.createElement("input",{type:"text",name:"username",onChange:a})),o.a.createElement(x,null,"Password:\xa0",o.a.createElement("input",{type:"password",name:"password",onChange:a})),o.a.createElement(w,{id:"submitBtn"},"Login"))}function F(e){var t=e.onSubmit,a=e.onChange,n=e.errors,l=e.disabled;return o.a.createElement(S,{onSubmit:t},o.a.createElement("div",null,o.a.createElement("h2",null,"Sign Up:")),o.a.createElement(x,null,"First Name:\xa0",o.a.createElement("input",{type:"text",name:"firstName",onChange:a})),o.a.createElement(C,null,n.firstName),o.a.createElement(x,null,"Last Name:\xa0",o.a.createElement("input",{type:"text",name:"lastName",onChange:a})),o.a.createElement(C,null,n.lastName),o.a.createElement(x,null,"Email:\xa0",o.a.createElement("input",{type:"email",name:"email",onChange:a})),o.a.createElement(C,null,n.email),o.a.createElement(x,null,"Username:\xa0",o.a.createElement("input",{type:"text",name:"username",onChange:a})),o.a.createElement(C,null,n.username),o.a.createElement(x,null,"Password:\xa0",o.a.createElement("input",{type:"password",name:"password",onChange:a})),o.a.createElement(C,null,n.password),o.a.createElement(w,{id:"submitBtn",disabled:l},"Sign Up"))}a(74);function L(e){var t=e.onSubmit,a=e.values,n=e.disabled,l=e.setListingValues,c=e.listingValues,m=function(e){var t=e.target,a=t.name,n=t.value;l(Object(i.a)(Object(i.a)({},c),{},Object(r.a)({},a,n)))};return o.a.createElement(S,{onSubmit:t},o.a.createElement("div",null,o.a.createElement("h2",null,"Create Listing:")),o.a.createElement(x,null,"Neighbourhood:\xa0",o.a.createElement("input",{type:"text",name:"neighbourhood",value:a.neighbuorhood,onChange:m})),o.a.createElement(x,null,"Room type:\xa0",o.a.createElement("select",{name:"roomtype",value:a.roomtype,onChange:m},o.a.createElement("option",{value:""},"-- None --"),o.a.createElement("option",{value:"Private room"},"Private room"),o.a.createElement("option",{value:"Entire home/apt"},"Entire home/apt"),o.a.createElement("option",{value:"Shared room"},"Shared room"))),o.a.createElement(x,null,"Maximum Guests:\xa0",o.a.createElement("select",{name:"accomodates",value:a.accomodates,onChange:m},o.a.createElement("option",{value:""},"-- None --"),o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"2"},"2"),o.a.createElement("option",{value:"3"},"3"),o.a.createElement("option",{value:"4"},"4"),o.a.createElement("option",{value:"5"},"5"),o.a.createElement("option",{value:"6"},"6"))),o.a.createElement(x,null,"Minimum Stay:\xa0",o.a.createElement("select",{name:"minnumnights",onChange:m,value:a.minnumnights},o.a.createElement("option",{value:"0"},"-- None --"),o.a.createElement("option",{value:"1"},"One Night"),o.a.createElement("option",{value:"2"},"Two Nights"),o.a.createElement("option",{value:"3"},"Three Night"),o.a.createElement("option",{value:"4"},"Four Nights"),o.a.createElement("option",{value:"5"},"Five Nights"),o.a.createElement("option",{value:"6"},"Six Nights"))),o.a.createElement(w,{id:"submitBtn",disabled:n},"Add Listing"))}function A(e){var t=e.userInfo,a=Object(n.useState)([]),l=Object(c.a)(a,2),r=l[0],i=l[1],s=Object(m.g)();return Object(n.useEffect)((function(){g().get("/users/getuserinfo").then((function(e){console.log("this is the user data",e),i(e.data.listings),console.log("this is user info",r),console.log(t)})).catch((function(e){return console.log(e)}))}),[]),o.a.createElement(k,null,o.a.createElement("div",{className:"profile-div"},o.a.createElement("h1",{className:"profile"},"Welcome ",t.username),o.a.createElement("p",null,t.primaryemail)),o.a.createElement(w,{onClick:function(){s.push("/createlisting")}},"+ ADD LISTING"),r&&r.map((function(e){return o.a.createElement(P,{key:e.listingid},o.a.createElement(u.b,{to:"/listingcard/".concat(e.listingid)},"Edit this entry"),o.a.createElement(x,null,"Optimal Price: ",e.optimalPrice),o.a.createElement(x,null,"Neighborhood: ",e.neighbourhood),o.a.createElement(x,null,"Room type: ",e.roomtype),o.a.createElement(x,null,"Maximum guests: ",e.accomodates),o.a.createElement(x,null,"Minimum nights: ",e.minnumnights))})))}var D=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],u=Object(m.h)().listingid,s=Object(m.g)(),p=Object(n.useState)([]),h=Object(c.a)(p,2),d=h[0],E=h[1];Object(n.useEffect)((function(){g().get("/listings/listing/".concat(u)).then((function(e){console.log("this is the user data",e),E(e.data),console.log("this is listing data",d)})).catch((function(e){return console.log(e)}))}),[]);var b=function(e){e.preventDefault(),E(Object(i.a)(Object(i.a)({},d),{},Object(r.a)({},e.target.name,e.target.value)))};Object(n.useEffect)((function(){f()}),[]);var f=function(){g().get("/listings/listing/".concat(u)).then((function(e){console.log(e),E(e.data)})).catch((function(e){console.log(e)}))};return o.a.createElement(k,null,o.a.createElement(P,null,o.a.createElement("h2",null,"Optimal price for this listing: ",d.optimalPrice),o.a.createElement(x,null,"Neighbourhood: ",d.neighbourhood),o.a.createElement(x,null,"Maximum guests: ",d.accomodates),o.a.createElement(x,null,"Minimum nights: ",d.minnumnights),o.a.createElement(x,null,"Room type: ",d.roomtype),o.a.createElement(w,{onClick:function(){l(!a)}},"Edit"),o.a.createElement(w,{onClick:function(){d.listingid,g().delete("/listings/listing/".concat(u)).then((function(e){console.log(e)})).catch((function(e){console.log(e)})).finally(s.push("/userprofile"))}},"Delete")),a?o.a.createElement(S,{onSubmit:function(e){e.preventDefault(),console.log("save entry listing data",d),g().patch("/listings/listing/".concat(u),d).then((function(e){console.log("save entry",e),l(!a)})).catch((function(e){console.log("save entry",e)})).finally(s.push("/userprofile"))}},o.a.createElement(x,null,"Neighbourhood:\xa0",o.a.createElement("input",{type:"text",name:"neighbourhood",defaultValue:d.neighbourhood,onChange:b})),o.a.createElement(x,null,"Room type:\xa0",o.a.createElement("select",{name:"roomtype",value:d.roomtype,onChange:b},o.a.createElement("option",{value:""},"-- None --"),o.a.createElement("option",{value:"Private room"},"Private room"),o.a.createElement("option",{value:"Entire home/apt"},"Entire home/apt"),o.a.createElement("option",{value:"Shared room"},"Shared room"))),o.a.createElement(x,null,"Maximum Guests:\xa0",o.a.createElement("select",{name:"maxnumguests",value:d.accomodates,onChange:b},o.a.createElement("option",{value:""},"-- None --"),o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"2"},"2"),o.a.createElement("option",{value:"3"},"3"),o.a.createElement("option",{value:"4"},"4"),o.a.createElement("option",{value:"5"},"5"),o.a.createElement("option",{value:"6"},"6"))),o.a.createElement(x,null,"Minimum Stay:\xa0",o.a.createElement("select",{name:"minnumnights",onChange:b,value:d.minnumnights},o.a.createElement("option",{value:""},"-- None --"),o.a.createElement("option",{value:"1"},"One Night"),o.a.createElement("option",{value:"2"},"Two Nights"),o.a.createElement("option",{value:"3"},"Three Night"),o.a.createElement("option",{value:"4"},"Four Nights"),o.a.createElement("option",{value:"5"},"Five Nights"),o.a.createElement("option",{value:"6"},"Six Nights"))),o.a.createElement(w,{type:"submit"},"Save Edit")):o.a.createElement(x,null,"Thank you for using OptimalPrice!"))},M=a(48),U=function(e){var t=e.component,a=Object(M.a)(e,["component"]),n=localStorage.getItem("token");return o.a.createElement(m.b,Object.assign({},a,{render:function(){return n?o.a.createElement(t,null):o.a.createElement(m.a,{to:"/login"})}}))},B={username:"",password:""},T={firstName:"",lastName:"",username:"",password:"",email:""},z={firstName:"",lastName:"",username:"",email:"",password:""},R={optimalPrice:250,roomtype:"",neighbourhood:"",accomodates:0,minnumnights:0},V=[];var G=function(){var e=Object(n.useState)(B),t=Object(c.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(T),E=Object(c.a)(s,2),b=E[0],f=E[1],v=Object(m.g)(),O=Object(n.useState)(z),j=Object(c.a)(O,2),N=j[0],y=j[1],S=Object(n.useState)(!1),w=Object(c.a)(S,2),x=w[0],C=w[1],k=Object(n.useState)({}),P=Object(c.a)(k,2),M=P[0],G=P[1],q=Object(n.useState)(R),J=Object(c.a)(q,2),_=J[0],W=J[1],H=Object(n.useState)(V),K=Object(c.a)(H,2),Q=K[0],X=K[1],Y=function(e){var t=e.target,n=t.name,o=t.value;h.b(d,n).validate(o).then((function(){y(Object(i.a)(Object(i.a)({},N),{},Object(r.a)({},n,"")))})).catch((function(e){y(Object(i.a)(Object(i.a)({},N),{},Object(r.a)({},n,e.errors[0])))})),l(Object(i.a)(Object(i.a)({},a),{},Object(r.a)({},n,o))),f(Object(i.a)(Object(i.a)({},b),{},Object(r.a)({},n,o)))},Z=function(e){e.preventDefault(),g().post("/login","grant_type=password&username=".concat(a.username,"&password=").concat(a.password),{headers:{Authorization:"Basic ".concat(btoa("lambda-client:lambda-secret")),"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){localStorage.setItem("token",e.data.access_token);var t=localStorage.getItem("token");console.log(t),console.log(e),l(B)})).catch((function(e){console.log(e)})).finally((function(){g().get("https://seanmx96-airbnb-optimal-price.herokuapp.com/users/getuserinfo").then((function(e){G(e.data),console.log(e.data.userid),localStorage.setItem("userid",e.data.userid);var t=localStorage.getItem("userid");console.log(t)})).catch((function(e){})),v.push("/userprofile")}))};return Object(n.useEffect)((function(){d.isValid(b).then((function(e){C(!e)}))}),[b]),o.a.createElement("div",{className:"App"},o.a.createElement("nav",{className:"App-header"},o.a.createElement("h1",null,"AirBnb Price Optimization"),o.a.createElement("div",{className:"nav-links"},o.a.createElement("a",{className:"link",href:"https://airbnb-3.github.io/user-interface-zave/"},"About"),o.a.createElement(u.b,{className:"link",to:"/login"},"Login"),o.a.createElement(u.b,{className:"link",to:"/signup"},"Sign Up"))),o.a.createElement("div",{className:"body"},o.a.createElement(m.d,null,o.a.createElement(m.b,{exact:!0,path:"/signup"},o.a.createElement(F,{onSubmit:function(e){e.preventDefault();var t={firstname:b.firstName,lastname:b.lastName,username:b.username,password:b.password,primaryemail:b.email};p.a.post("https://seanmx96-airbnb-optimal-price.herokuapp.com/createnewuser",t).then((function(e){console.log(e.data),v.push("/login"),f(T)})).catch((function(e){console.log(e)}))},onChange:Y,values:b,errors:N,disabled:x})),o.a.createElement(m.b,{exact:!0,path:"/login"},o.a.createElement(I,{onSubmit:Z,onChange:Y,values:a})),o.a.createElement(U,{path:"/userprofile"},o.a.createElement(A,{userInfo:M,setUserInfo:G})),o.a.createElement(U,{path:"/listingcard/:listingid",component:D}),o.a.createElement(U,{exact:!0,path:"/createlisting"},o.a.createElement(L,{onSubmit:function(e){e.preventDefault();var t={optimalPrice:_.optimalPrice,roomtype:_.roomtype,neighbourhood:_.neighbourhood,accomodates:_.accomodates,minnumnights:_.minnumnights},a=localStorage.getItem("userid");console.log(a),g().post("/listings/user/".concat(a,"/"),t).then((function(e){console.log(e.data),X(e.data)})).catch((function(e){})).finally((function(){console.log(Q),v.push("/userprofile")}))},values:_,setListingValues:W,listingValues:_})),o.a.createElement(I,{onSubmit:Z,onChange:Y,values:a}),o.a.createElement(m.b,{path:"/"}))))};Object(l.render)(o.a.createElement(u.a,null,o.a.createElement(G,null)),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.46283d1e.chunk.js.map